(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{44:function(e,t,a){e.exports=a(82)},82:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(24),l=a.n(o),c=a(9),s=a(3),i=a(17),u=a(39),m=a.n(u),p=a(40),d=a(2),h=Object(i.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_LOGIN":case"USER_AUTH":return Object(d.a)({},e,{login:t.payload});case"GET_REVIEWER":return Object(d.a)({},e,{reviewer:t.payload});case"GET_REVIEW":return Object(d.a)({},e,{reviews:t.payload});case"GET_USERS":return Object(d.a)({},e,{users:t.payload});case"ADD_USER":return Object(d.a)({},e,{register:t.payload.success,users:t.payload.users});default:return e}},books:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_BOOKS":return Object(d.a)({},e,{list:t.payload});case"GET_BOOK_W_REVIEWER":case"CLEAR_BOOK_W_REVIEWER":return Object(d.a)({},e,{book:t.payload.book,reviewer:t.payload.reviewer});case"ADD_BOOK":case"EDIT_BOOK":return Object(d.a)({},e,{newbook:t.payload});case"DELETE_BOOK":return Object(d.a)({},e,{delete:t.payload});case"CLEAR_NEW_BOOK":return Object(d.a)({},e,{newbook:t.payload,delete:null});default:return e}}}),E=a(18),v=a(4),b=a(5),f=a(7),y=a(6),k=a(8),g=a(22),O=a(10),w=a.n(O);function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"asc",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return{type:"GET_BOOKS",payload:w.a.get("/api/book/books?limit=".concat(e,"&skip=").concat(t,"&order=").concat(a)).then(function(e){return[].concat(Object(g.a)(n),Object(g.a)(e.data))})}}function N(e){var t=w.a.get("/api/book?id=".concat(e));return function(e){t.then(function(t){var a,n=t.data;(a=n.ownerId,{type:"GET_REVIEWER",payload:w.a.get("/api/user/getReviewers?id=".concat(a)).then(function(e){var t=e.data;return t})}).payload.then(function(t){e({type:"GET_BOOK_W_REVIEWER",payload:{book:n,reviewer:t}})})})}}var j=function(e){var t=e.item;return r.a.createElement(c.b,{to:"/books/".concat(t._id),className:"book_item"},r.a.createElement("div",{className:"book_header"},r.a.createElement("h2",null,t.name)),r.a.createElement("div",{className:"book_items"},r.a.createElement("div",{className:"book_author"},t.author),r.a.createElement("div",{className:"book_bubble"},r.a.createElement("strong",null,"Price")," $ ",t.price),r.a.createElement("div",{className:"book_bubble"},r.a.createElement("strong",null,"Pages")," ",t.pages),r.a.createElement("div",{className:"book_bubble rating"},r.a.createElement("strong",null,"Rating")," ",t.rating)))},I=function(e){function t(){var e,a;Object(v.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(f.a)(this,(e=Object(y.a)(t)).call.apply(e,[this].concat(o)))).renderItems=function(e){return e.list?e.list.map(function(e,t){return r.a.createElement(j,{key:t,item:e})}):null},a.loadMore=function(){var e=a.props.books.list.length;a.props.dispatch(_(3,e,"desc",a.props.books.list))},a}return Object(k.a)(t,e),Object(b.a)(t,[{key:"componentWillMount",value:function(){this.props.dispatch(_(3,0,"desc"))}},{key:"render",value:function(){return r.a.createElement("div",null,this.renderItems(this.props.books),r.a.createElement("div",{className:"loadmore",onClick:this.loadMore},"Load More"))}}]),t}(n.Component),x=Object(s.b)(function(e){return{books:e.books}})(I),R=function(){return r.a.createElement("div",null,r.a.createElement(x,null))},C=a(27),A=a.n(C),B=a(42),S=a.n(B),W=Object(s.b)(function(e){return{user:e.user}})(function(e){var t=e.user,a=[{type:"navItem",icon:"home",text:"Home",link:"/",restricted:!1},{type:"navItem",icon:"file-text-o",text:"My Profile",link:"/user",restricted:!0},{type:"navItem",icon:"file-text-o",text:"Add Admins",link:"/register",restricted:!0},{type:"navItem",icon:"sign-in",text:"Login",link:"/login",restricted:!1,exclude:!0},{type:"navItem",icon:"file-text-o",text:"My Reviews",link:"/user/user-reviews",restricted:!0},{type:"navItem",icon:"file-text-o",text:"Add Reviews",link:"/user/add",restricted:!0},{type:"navItem",icon:"sign-out",text:"Logout",link:"/logout",restricted:!0}],n=function(e,t){return r.a.createElement("div",{key:t,className:e.type},r.a.createElement(c.b,{to:e.link},r.a.createElement(A.a,{name:e.icon}),e.text))};return r.a.createElement("div",null,t.login?a.map(function(e,a){return t.login.isAuth?e.exclude?null:n(e,a):e.restricted?null:n(e,a)}):null)}),D=function(e){return r.a.createElement(S.a,{showNav:e.showNav,onHideNav:e.onHideNav,navStyle:{background:"#242424",maxWidth:"220px"}},r.a.createElement(W,null))},U=function(e){function t(){var e,a;Object(v.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(f.a)(this,(e=Object(y.a)(t)).call.apply(e,[this].concat(r)))).state={showNav:!1},a}return Object(k.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("header",null,r.a.createElement("div",{className:"open_nav"},r.a.createElement(A.a,{name:"bars",style:{color:"#fff",padding:"10px",cursor:"pointer"},onClick:function(){return e.setState({showNav:!e.state.showNav})}})),r.a.createElement(D,{showNav:this.state.showNav,onHideNav:function(){return e.setState({showNav:!1})}}),r.a.createElement(c.b,{to:"/home",className:"logo"},"The Book Shelf"))}}]),t}(n.Component),T=function(e){return r.a.createElement("div",null,r.a.createElement(U,null),r.a.createElement("div",null,e.children))},L=function(e){function t(){var e,a;Object(v.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(f.a)(this,(e=Object(y.a)(t)).call.apply(e,[this].concat(o)))).renderBooks=function(e){return e.book?r.a.createElement("div",{className:"br_container"},r.a.createElement("div",{className:"br_header"},r.a.createElement("h2",null,e.book.name),r.a.createElement("h5",null,e.book.author),r.a.createElement("div",{className:"br_reviewer"},r.a.createElement("span",null,"Review by:")," ",e.reviewer.name," ",e.reviewer.lastname)),r.a.createElement("div",{className:"br_review"},e.book.review),r.a.createElement("div",{className:"br_box"},r.a.createElement("div",{className:"left"},r.a.createElement("div",null,r.a.createElement("span",null,"Pages:")," ",e.book.pages),r.a.createElement("div",null,r.a.createElement("span",null,"Price:")," $ ",e.book.price)),r.a.createElement("div",{className:"right"},r.a.createElement("span",null,"Rating:"),r.a.createElement("div",null,e.book.rating,"/5")))):null},a}return Object(k.a)(t,e),Object(b.a)(t,[{key:"componentWillMount",value:function(){this.props.dispatch(N(this.props.match.params.id))}},{key:"componentWillUnmount",value:function(){this.props.dispatch({type:"CLEAR_BOOK_W_REVIEWER",payload:{book:{},reviewer:{}}})}},{key:"render",value:function(){var e=this.props.books;return r.a.createElement("div",null,this.renderBooks(e))}}]),t}(n.Component),P=Object(s.b)(function(e){return{books:e.books}})(L),K=a(19),M=function(e){function t(){var e,a;Object(v.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(f.a)(this,(e=Object(y.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:"",error:"",success:!1},a.handleInput=function(e){a.setState(Object(K.a)({},e.target.name,e.target.value))},a.submitForm=function(e){e.preventDefault(),a.props.dispatch(function(e){var t=e.email,a=e.password;return{type:"USER_LOGIN",payload:w.a.post("/api/user/login",{email:t,password:a}).then(function(e){return e.data})}}(a.state))},a}return Object(k.a)(t,e),Object(b.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.user.login.isAuth&&this.props.history.push("/user")}},{key:"render",value:function(){var e=this.props.user;return r.a.createElement("div",{className:"rl_container"},r.a.createElement("form",{onSubmit:this.submitForm},r.a.createElement("h2",null,"Log in here"),r.a.createElement("div",{className:"form_elememt"},r.a.createElement("input",{type:"email",placeholder:"Enter your email",name:"email",value:this.state.email,onChange:this.handleInput})),r.a.createElement("div",{className:"form_elememt"},r.a.createElement("input",{type:"password",name:"password",placeholder:"Enter your password",value:this.state.password,onChange:this.handleInput})),r.a.createElement("button",{type:"submit"},"Log in"),r.a.createElement("div",{className:"error"},e.login&&!e.login.isAuth?r.a.createElement("div",null,e.login.msg):null)))}}]),t}(n.Component),G=Object(s.b)(function(e){return{user:e.user}})(M),F=function(e,t){var a=function(a){function n(){var e,t;Object(v.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(t=Object(f.a)(this,(e=Object(y.a)(n)).call.apply(e,[this].concat(r)))).state={loading:!0},t}return Object(k.a)(n,a),Object(b.a)(n,[{key:"componentWillMount",value:function(){this.props.dispatch({type:"USER_AUTH",payload:w.a.get("/api/auth").then(function(e){return e.data})})}},{key:"componentWillReceiveProps",value:function(e){this.setState({loading:!1}),e.user.login.isAuth?!1===t&&this.props.history.push("/user"):!0===t&&this.props.history.push("/login")}},{key:"render",value:function(){return this.state.loading?r.a.createElement("div",{className:"loader"},"...loading"):r.a.createElement(e,Object.assign({},this.props,{user:this.props.user}))}}]),n}(n.Component);return Object(s.b)(function(e){return{user:e.user}})(a)},V=function(e){var t=e.user.login;return r.a.createElement("div",{className:"user_container"},r.a.createElement("div",{className:"avatar"},r.a.createElement("img",{alt:"avatar",src:"/images/avatar.png"})),r.a.createElement("div",{className:"nfo"},r.a.createElement("div",null,r.a.createElement("span",null,"Name:")," ",t.name),r.a.createElement("div",null,r.a.createElement("span",null,"LastName:")," ",t.lastname),r.a.createElement("div",null,r.a.createElement("span",null,"Email:")," ",t.email)))},H=function(e){function t(){var e,a;Object(v.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(f.a)(this,(e=Object(y.a)(t)).call.apply(e,[this].concat(o)))).state={formdata:{name:"",author:"",review:"",pages:"",rating:"",price:""}},a.handleInput=function(e,t){var n=Object(d.a)({},a.state.formdata);n[t]=e.target.value,a.setState({formdata:n})},a.showNewBooks=function(e){return e.post?r.a.createElement("div",{className:"cnf_link"},"Cool!! ",r.a.createElement(c.b,{to:"/books/".concat(e.bookId)},"See new Book")):null},a.submitForm=function(e){var t;e.preventDefault(),a.props.dispatch((t=Object(d.a)({},a.state.formdata,{ownerId:a.props.user.login.id}),{type:"ADD_BOOK",payload:w.a.post("/api/book",t).then(function(e){return e.data})}))},a}return Object(k.a)(t,e),Object(b.a)(t,[{key:"componentWillUnmount",value:function(){this.props.dispatch({type:"CLEAR_NEW_BOOK",payload:null})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"rl_container article"},r.a.createElement("form",{onSubmit:this.submitForm},r.a.createElement("h2",null,"Add a Book"),r.a.createElement("div",{className:"form_element"},r.a.createElement("input",{type:"text",placeholder:"Enter Name",value:this.state.formdata.name,onChange:function(t){return e.handleInput(t,"name")}})),r.a.createElement("div",{className:"form_element"},r.a.createElement("input",{type:"text",placeholder:"Enter Author",value:this.state.formdata.author,onChange:function(t){return e.handleInput(t,"author")}})),r.a.createElement("div",{className:"form_element"},r.a.createElement("input",{type:"text",placeholder:"Enter Review",value:this.state.formdata.review,onChange:function(t){return e.handleInput(t,"review")}})),r.a.createElement("div",{className:"form_element"},r.a.createElement("input",{type:"text",placeholder:"Enter Pages",value:this.state.formdata.pages,onChange:function(t){return e.handleInput(t,"pages")}})),r.a.createElement("div",{className:"form_element"},r.a.createElement("select",{value:this.state.formdata.rating,onChange:function(t){return e.handleInput(t,"rating")}},r.a.createElement("option",{value:"1"},"1"),r.a.createElement("option",{value:"2"},"2"),r.a.createElement("option",{value:"3"},"3"),r.a.createElement("option",{value:"4"},"4"),r.a.createElement("option",{value:"5"},"5"))),r.a.createElement("div",{className:"form_element"},r.a.createElement("input",{type:"text",placeholder:"Enter Price",value:this.state.formdata.price,onChange:function(t){return e.handleInput(t,"price")}})),r.a.createElement("button",{type:"submit"},"Add Review"),this.props.books.newbook?this.showNewBooks(this.props.books.newbook):null))}}]),t}(n.Component),Y=Object(s.b)(function(e){return{books:e.books}})(H),J=a(43),$=a.n(J),q=function(e){function t(){var e,a;Object(v.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(f.a)(this,(e=Object(y.a)(t)).call.apply(e,[this].concat(o)))).showUserPosts=function(e){return e.reviews?e.reviews.map(function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,r.a.createElement(c.b,{to:"/user/edit-post/".concat(e._id)},e.name)),r.a.createElement("td",null,e.author),r.a.createElement("td",null,$()(e.createdAt).format("DD/MM/YY")))}):null},a}return Object(k.a)(t,e),Object(b.a)(t,[{key:"componentWillMount",value:function(){var e;this.props.dispatch((e=this.props.user.login.id,{type:"GET_REVIEW",payload:w.a.get("/api/book/reviewer?user=".concat(e)).then(function(e){return e.data})}))}},{key:"render",value:function(){var e=this.props.user;return r.a.createElement("div",{className:"user_posts"},r.a.createElement("h4",null,"Your Reviews"),r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Author"),r.a.createElement("th",null,"Date"))),r.a.createElement("tbody",null,this.showUserPosts(e))))}}]),t}(n.Component),z=Object(s.b)(function(e){return{user:e.user}})(q),Q=function(e){function t(){var e,a;Object(v.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(f.a)(this,(e=Object(y.a)(t)).call.apply(e,[this].concat(o)))).state={formdata:{name:"",author:"",review:"",pages:"",rating:"",price:""}},a.handleInput=function(e,t){var n=Object(d.a)({},a.state.formdata);n[t]=e.target.value,a.setState({formdata:n})},a.showNewBooks=function(e){return e.success?r.a.createElement("div",{className:"edit_confirm"},"Updated!! ",r.a.createElement(c.b,{to:"/books/".concat(e.book._id)},"See edited Book")):null},a.submitForm=function(e){var t;e.preventDefault(),a.props.dispatch((t=Object(d.a)({},a.state.formdata,{ownerId:a.props.user.login.id,_id:a.props.match.params.bookId}),{type:"EDIT_BOOK",payload:w.a.put("/api/book",t).then(function(e){return e.data})}))},a.deleteBook=function(e,t){a.props.dispatch(function(e){return{type:"DELETE_BOOK",payload:w.a.delete("/api/book?id=".concat(e)).then(function(e){return e.data})}}(t))},a}return Object(k.a)(t,e),Object(b.a)(t,[{key:"componentWillMount",value:function(){var e=this.props.match.params.bookId;this.props.dispatch(N(e))}},{key:"componentWillReceiveProps",value:function(e){if(e.books.delete)console.log(e.books.delete),this.props.history.push("/user/user-reviews");else if(e.books.book&&!e.books.newbook){var t=Object(d.a)({},e.books.book);this.setState({formdata:t})}}},{key:"componentWillUnmount",value:function(){this.props.dispatch({type:"CLEAR_NEW_BOOK",payload:null})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"rl_container article"},this.props.books.newbook?this.showNewBooks(this.props.books.newbook):null,r.a.createElement("form",{onSubmit:this.submitForm},r.a.createElement("h2",null,"Edit a Book"),r.a.createElement("div",{className:"form_element"},r.a.createElement("input",{type:"text",placeholder:"Enter Name",value:this.state.formdata.name,onChange:function(t){return e.handleInput(t,"name")}})),r.a.createElement("div",{className:"form_element"},r.a.createElement("input",{type:"text",placeholder:"Enter Author",value:this.state.formdata.author,onChange:function(t){return e.handleInput(t,"author")}})),r.a.createElement("div",{className:"form_element"},r.a.createElement("input",{type:"text",placeholder:"Enter Review",value:this.state.formdata.review,onChange:function(t){return e.handleInput(t,"review")}})),r.a.createElement("div",{className:"form_element"},r.a.createElement("input",{type:"text",placeholder:"Enter Pages",value:this.state.formdata.pages,onChange:function(t){return e.handleInput(t,"pages")}})),r.a.createElement("div",{className:"form_element"},r.a.createElement("select",{value:this.state.formdata.rating,onChange:function(t){return e.handleInput(t,"rating")}},r.a.createElement("option",{value:"1"},"1"),r.a.createElement("option",{value:"2"},"2"),r.a.createElement("option",{value:"3"},"3"),r.a.createElement("option",{value:"4"},"4"),r.a.createElement("option",{value:"5"},"5"))),r.a.createElement("div",{className:"form_element"},r.a.createElement("input",{type:"text",placeholder:"Enter Price",value:this.state.formdata.price,onChange:function(t){return e.handleInput(t,"price")}})),r.a.createElement("button",{type:"submit"},"Edit Review"),r.a.createElement("div",{onClick:function(t){return e.deleteBook(t,e.props.match.params.bookId)},className:"delete_post"},r.a.createElement("div",{className:"button"},"Delete Book"))))}}]),t}(n.Component),X=Object(s.b)(function(e){return{books:e.books}})(Q),Z=function(e){function t(){var e,a;Object(v.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(f.a)(this,(e=Object(y.a)(t)).call.apply(e,[this].concat(o)))).state={name:"",lastname:"",email:"",password:"",error:""},a.handleInput=function(e,t){a.setState(Object(K.a)({},t,e.target.value))},a.showUsers=function(e){return e.map(function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.lastname),r.a.createElement("td",null,e.email))})},a.submitForm=function(e){e.preventDefault(),a.setState({error:""}),a.props.dispatch(function(e,t){var a=w.a.post("/api/user/register",e);return function(e){a.then(function(a){var n=a.data,r={success:n.success,users:n.success?[].concat(Object(g.a)(t),[n.user]):Object(g.a)(t)};e({type:"ADD_USER",payload:r})})}}(a.state,a.props.user.users))},a}return Object(k.a)(t,e),Object(b.a)(t,[{key:"componentWillMount",value:function(){this.props.dispatch({type:"GET_USERS",payload:w.a.get("/api/user/users").then(function(e){return e.data})})}},{key:"componentWillReceiveProps",value:function(e){!1===e.user.success?this.setState({error:"Error"}):this.setState({name:"",lastname:"",email:"",password:"",error:""})}},{key:"render",value:function(){var e=this,t=this.props.user;return r.a.createElement("div",{className:"rl_container"},this.state.error,r.a.createElement("form",{onSubmit:this.submitForm},r.a.createElement("h2",null,"Add User"),r.a.createElement("div",{className:"form_element"},r.a.createElement("input",{type:"text",placeholder:"Enter Name",value:this.state.name,onChange:function(t){return e.handleInput(t,"name")}})),r.a.createElement("div",{className:"form_element"},r.a.createElement("input",{type:"text",placeholder:"Enter Last Name",value:this.state.lastname,onChange:function(t){return e.handleInput(t,"lastname")}})),r.a.createElement("div",{className:"form_element"},r.a.createElement("input",{type:"text",placeholder:"Enter Email",value:this.state.email,onChange:function(t){return e.handleInput(t,"email")}})),r.a.createElement("div",{className:"form_element"},r.a.createElement("input",{type:"text",placeholder:"Enter Password",value:this.state.password,onChange:function(t){return e.handleInput(t,"password")}})),r.a.createElement("button",{type:"submit"},"Add Admin")),r.a.createElement("div",{className:"current_users"},r.a.createElement("h4",null,"Current Users:"),r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Lastname"),r.a.createElement("th",null,"Email"))),r.a.createElement("tbody",null,t.users?this.showUsers(t.users):null))))}}]),t}(n.Component);var ee=Object(s.b)(function(e){return{user:e.user}})(Z),te=function(e){return w.a.get("/api/user/logout").then(function(t){t.data,setTimeout(function(){e.history.push("/")},3e3)}),r.a.createElement("div",{className:"logout_container"},r.a.createElement("h1",null,"Bye"))},ae=function(){return r.a.createElement(T,null,r.a.createElement(E.c,null,r.a.createElement(E.a,{path:"/",exact:!0,component:F(R,null)}),r.a.createElement(E.a,{path:"/books/:id",exact:!0,component:F(P)}),r.a.createElement(E.a,{path:"/login",exact:!0,component:F(G,!1)}),r.a.createElement(E.a,{path:"/user",exact:!0,component:F(V,!0)}),r.a.createElement(E.a,{path:"/user/add",exact:!0,component:F(Y,!0)}),r.a.createElement(E.a,{path:"/user/user-reviews",exact:!0,component:F(z,!0)}),r.a.createElement(E.a,{path:"/user/edit-post/:bookId",exact:!0,component:F(X,!0)}),r.a.createElement(E.a,{path:"/register",exact:!0,component:F(ee,!0)}),r.a.createElement(E.a,{path:"/logout",exact:!0,component:F(te,!0)})))},ne=Object(i.a)(m.a,p.a)(i.d);l.a.render(r.a.createElement(s.a,{store:ne(h)},r.a.createElement(c.a,null,r.a.createElement(ae,null))),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.d2470cbe.chunk.js.map